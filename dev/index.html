<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="white">
  <title>mashgiach</title>
  
</head>
<link rel="manifest" href="../manifest.webmanifest">
<link rel="icon" type = "image/x-icon" href = "../src/assets/app_icon.svg">
<body>
  <script src="./index.js" type="module"></script>
  <script>
    document.addEventListener("DOMContentLoaded", function() {
  const cardElement = document.getElementById('open-card');
  console.log("found card element {cardElement}");

  let startX;
  let endX;

  cardElement.addEventListener('touchstart', function(event) {
      startX = event.touches[0].clientX;
      console.log("startX {startX}");
  });

  cardElement.addEventListener('touchmove', function(event) {
      endX = event.touches[0].clientX;
      console.log("endX {endX}");
  });

  cardElement.addEventListener('touchend', function() {
      const diffX = startX - endX;
      if (diffX > 50) { // Swipe left detection threshold
          clearCard();
      }
  });

  function clearCard() {
      const backButton = document.getElementById('back-button');
      console.log("found back button {backButton}");
      if (!backButton) {
              console.error('Back button with ID "back-button" not found.');
          }
      if (backButton) {
          backButton.click(); // Simulate the back button click
      }
  }
});
  </script>
  <script>
    const sw = "service-worker.js"; // it is needed because parcel will not recognize this as a file and not precess in its manner

navigator.serviceWorker
  .register(sw)
  .then(registration => {
    registration.onupdatefound = () => {
      const installingWorker = registration.installing;
      if (installingWorker == null) {
        return;
      }
      installingWorker.onstatechange = () => {
        if (installingWorker.state === "installed") {
          if (navigator.serviceWorker.controller) {
            console.log(
              "New content is available and will be used when all " +
                "tabs for this page are closed. See https://bit.ly/CRA-PWA."
            );
          } else {
            console.log("Content is cached for offline use.");
          }
        }
      };
    };
  })
  .catch(error => {
    console.error("Error during service worker registration:", error);
  });

  </script>
</body>

</html>